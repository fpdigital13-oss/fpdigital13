<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FP Digital Printing - Sistem Pembukuan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        
        body { 
            font-family: 'Poppins', sans-serif; 
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }
        
        .sidebar-item:hover { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            transform: translateX(4px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .active-tab { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
            transform: translateX(4px);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }
        
        .card-hover:hover { 
            transform: translateY(-8px) scale(1.02); 
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
            border: 1px solid rgba(102, 126, 234, 0.2);
        }
        
        .gradient-bg { 
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); 
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-gradient {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid rgba(102, 126, 234, 0.1);
        }
        
        .status-badge {
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .sidebar-gradient {
            background: linear-gradient(180deg, #ffffff 0%, #f8fafc 100%);
            border-right: 1px solid rgba(102, 126, 234, 0.1);
        }
        
        .header-glass {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.9) 0%, rgba(118, 75, 162, 0.9) 100%);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .input-focus:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-1px);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.6);
        }
        
        .table-row:hover {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
            transform: translateX(4px);
        }
        
        .stat-card {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid rgba(102, 126, 234, 0.1);
            position: relative;
            overflow: hidden;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .modal-backdrop {
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
        }
        
        .modal-content {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid rgba(102, 126, 234, 0.2);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
        }
        
        .icon-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(-100%); }
            to { transform: translateX(0); }
        }
        
        .price-card-elegant {
            background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
            border: 1px solid rgba(102, 126, 234, 0.1);
            border-radius: 1.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }
        
        .price-card-elegant:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 25px 50px rgba(102, 126, 234, 0.15);
            border-color: rgba(102, 126, 234, 0.2);
        }
        
        .price-card-elegant::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.02) 0%, rgba(118, 75, 162, 0.02) 100%);
            border-radius: 1.5rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .price-card-elegant:hover::before {
            opacity: 1;
        }
        
        .price-section {
            position: relative;
            padding: 1rem;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.05) 0%, rgba(147, 51, 234, 0.05) 100%);
            border-radius: 1rem;
            border: 1px solid rgba(59, 130, 246, 0.1);
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="login-page" class="min-h-screen flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-md w-full space-y-8">
            <!-- Logo and Title -->
            <div class="text-center">
                <div class="mx-auto w-20 h-20 gradient-bg rounded-2xl flex items-center justify-center mb-6 shadow-lg">
                    <span class="text-white font-bold text-2xl">FP</span>
                </div>
                <h2 class="text-3xl font-bold text-gray-900 mb-2">Selamat Datang</h2>
                <p class="text-gray-600">Masuk ke sistem FP Digital Printing</p>
            </div>

            <!-- Login Form -->
            <div class="modal-content rounded-2xl p-8 shadow-xl">
                <form id="login-form" class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                        <div class="relative">
                            <input type="text" id="login-username" class="w-full px-4 py-3 pl-12 border border-gray-300 rounded-xl input-focus transition-all duration-300" placeholder="Masukkan username" required>
                            <svg class="w-5 h-5 text-gray-400 absolute left-4 top-3.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                            </svg>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <div class="relative">
                            <input type="password" id="login-password" class="w-full px-4 py-3 pl-12 pr-12 border border-gray-300 rounded-xl input-focus transition-all duration-300" placeholder="Masukkan password" required>
                            <svg class="w-5 h-5 text-gray-400 absolute left-4 top-3.5" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"></path>
                            </svg>
                            <button type="button" onclick="togglePassword()" class="absolute right-4 top-3.5 text-gray-400 hover:text-gray-600">
                                <svg id="eye-icon" class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
                                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                        </div>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input type="checkbox" id="remember-me" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                            <label for="remember-me" class="ml-2 block text-sm text-gray-700">Ingat saya</label>
                        </div>
                        <button type="button" class="text-sm text-blue-600 hover:text-blue-800 font-medium">
                            Lupa password?
                        </button>
                    </div>

                    <button type="submit" class="w-full btn-primary text-white py-3 rounded-xl font-semibold text-lg">
                        Masuk
                    </button>
                </form>

                <!-- Demo Credentials -->
                <div class="mt-6 p-4 bg-blue-50 rounded-xl border border-blue-200">
                    <h4 class="text-sm font-medium text-blue-800 mb-3">🔑 Demo Login:</h4>
                    <div class="space-y-3">
                        <div class="bg-white p-3 rounded-lg border border-blue-100">
                            <div class="text-sm text-blue-700 space-y-1">
                                <p><strong>👑 Admin (Full Access):</strong></p>
                                <p>Username: <code class="bg-blue-100 px-2 py-1 rounded">admin</code></p>
                                <p>Password: <code class="bg-blue-100 px-2 py-1 rounded">admin123</code></p>
                            </div>
                        </div>
                        <div class="bg-white p-3 rounded-lg border border-green-100">
                            <div class="text-sm text-green-700 space-y-1">
                                <p><strong>👤 User (Limited Access):</strong></p>
                                <p>Username: <code class="bg-green-100 px-2 py-1 rounded">user</code></p>
                                <p>Password: <code class="bg-green-100 px-2 py-1 rounded">user123</code></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <div class="text-center text-sm text-gray-500">
                <p>&copy; 2024 FP Digital Printing. All rights reserved.</p>
            </div>
        </div>
    </div>

    <!-- Main Application (Hidden initially) -->
    <div id="main-app" class="hidden">
        <!-- Mobile Menu Button -->
        <button id="mobile-menu-btn" class="lg:hidden fixed top-4 left-4 z-50 w-12 h-12 bg-white rounded-xl shadow-lg flex items-center justify-center">
            <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
        </button>

        <!-- Mobile Overlay -->
        <div id="mobile-overlay" class="lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 hidden"></div>

        <div class="flex h-screen overflow-hidden">
            <!-- Sidebar -->
            <div id="sidebar" class="w-64 sidebar-gradient shadow-xl animate-slide-in fixed lg:relative inset-y-0 left-0 z-50 transform -translate-x-full lg:translate-x-0 transition-transform duration-300 ease-in-out">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 gradient-bg rounded-xl flex items-center justify-center">
                        <span class="text-white font-bold text-lg">FP</span>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">FP Digital</h1>
                        <p class="text-sm text-gray-600">Printing System</p>
                    </div>
                </div>
            </div>
            
            <nav class="mt-6 px-4">
                <div class="space-y-2">
                    <button onclick="showTab('dashboard')" class="sidebar-item w-full flex items-center px-4 py-3 text-left text-gray-700 rounded-xl transition-all duration-300 active-tab" id="tab-dashboard">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"></path>
                        </svg>
                        Dashboard
                    </button>
                    
                    <button onclick="showTab('transaksi-harian')" class="sidebar-item w-full flex items-center px-4 py-3 text-left text-gray-700 rounded-xl transition-all duration-300" id="tab-transaksi-harian">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path>
                        </svg>
                        Transaksi Harian
                    </button>
                    
                    <button onclick="showTab('tagihan')" class="sidebar-item w-full flex items-center px-4 py-3 text-left text-gray-700 rounded-xl transition-all duration-300" id="tab-tagihan">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path>
                        </svg>
                        Tagihan
                    </button>
                    
                    <button onclick="showTab('surat-jalan')" class="sidebar-item w-full flex items-center px-4 py-3 text-left text-gray-700 rounded-xl transition-all duration-300" id="tab-surat-jalan">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"></path>
                        </svg>
                        Surat Jalan
                    </button>
                    
                    <button onclick="showTab('laporan')" class="sidebar-item w-full flex items-center px-4 py-3 text-left text-gray-700 rounded-xl transition-all duration-300" id="tab-laporan">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2v1a2 2 0 002 2h8a2 2 0 002-2V3a2 2 0 012 2v6a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3z" clip-rule="evenodd"></path>
                        </svg>
                        Laporan
                    </button>
                    
                    <button onclick="showTab('pelanggan')" class="sidebar-item w-full flex items-center px-4 py-3 text-left text-gray-700 rounded-xl transition-all duration-300" id="tab-pelanggan">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
                        </svg>
                        Pelanggan
                    </button>
                    
                    <button onclick="showTab('harga')" class="sidebar-item w-full flex items-center px-4 py-3 text-left text-gray-700 rounded-xl transition-all duration-300" id="tab-harga">
                        <svg class="w-5 h-5 mr-3" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"></path>
                        </svg>
                        Daftar Harga
                    </button>
                </div>
            </nav>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden lg:ml-0">
            <!-- Header -->
            <header class="header-glass shadow-lg">
                <div class="flex items-center justify-between px-4 lg:px-6 py-4 ml-12 lg:ml-0">
                    <div class="flex-1 min-w-0">
                        <h2 class="text-lg lg:text-2xl font-bold text-white truncate" id="page-title">Dashboard</h2>
                        <p class="text-blue-100 text-sm lg:text-base hidden sm:block" id="page-subtitle">Ringkasan aktivitas bisnis Anda</p>
                    </div>
                    <div class="flex items-center space-x-2 lg:space-x-4">
                        <div class="text-right text-white hidden md:block">
                            <p class="text-sm opacity-90">Selamat datang,</p>
                            <p class="font-semibold" id="user-display-name">Admin FP Digital</p>
                        </div>
                        <div class="flex items-center space-x-2 lg:space-x-3">
                            <button onclick="logout()" class="w-8 h-8 lg:w-10 lg:h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center hover:bg-opacity-30 transition-all duration-300" title="Keluar">
                                <svg class="w-4 h-4 lg:w-5 lg:h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3 3a1 1 0 00-1 1v12a1 1 0 102 0V4a1 1 0 00-1-1zm10.293 9.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L14.586 9H7a1 1 0 100 2h7.586l-1.293 1.293z" clip-rule="evenodd"></path>
                                </svg>
                            </button>
                            <div class="w-8 h-8 lg:w-10 lg:h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <svg class="w-5 h-5 lg:w-6 lg:h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd"></path>
                                </svg>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="flex-1 overflow-y-auto p-4 lg:p-6">
                <!-- Dashboard Tab -->
                <div id="content-dashboard" class="animate-fade-in">
                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 mb-6 lg:mb-8">
                        <div class="stat-card rounded-xl lg:rounded-2xl p-4 lg:p-6 card-hover transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs lg:text-sm font-medium text-gray-600">Total Penjualan</p>
                                    <p class="text-xl lg:text-3xl font-bold text-gray-900 truncate" id="total-sales">Rp 0</p>
                                    <p class="text-xs lg:text-sm text-green-600 mt-1">+12% dari bulan lalu</p>
                                </div>
                                <div class="w-10 h-10 lg:w-12 lg:h-12 gradient-bg rounded-lg lg:rounded-xl flex items-center justify-center flex-shrink-0 ml-2">
                                    <svg class="w-5 h-5 lg:w-6 lg:h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="stat-card rounded-xl lg:rounded-2xl p-4 lg:p-6 card-hover transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs lg:text-sm font-medium text-gray-600">Transaksi Hari Ini</p>
                                    <p class="text-xl lg:text-3xl font-bold text-gray-900 truncate" id="today-transactions">0</p>
                                    <p class="text-xs lg:text-sm text-blue-600 mt-1">Aktif</p>
                                </div>
                                <div class="w-10 h-10 lg:w-12 lg:h-12 gradient-bg rounded-lg lg:rounded-xl flex items-center justify-center flex-shrink-0 ml-2">
                                    <svg class="w-5 h-5 lg:w-6 lg:h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="stat-card rounded-xl lg:rounded-2xl p-4 lg:p-6 card-hover transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs lg:text-sm font-medium text-gray-600">Total Pelanggan</p>
                                    <p class="text-xl lg:text-3xl font-bold text-gray-900 truncate" id="total-customers">0</p>
                                    <p class="text-xs lg:text-sm text-purple-600 mt-1">Terdaftar</p>
                                </div>
                                <div class="w-10 h-10 lg:w-12 lg:h-12 gradient-bg rounded-lg lg:rounded-xl flex items-center justify-center flex-shrink-0 ml-2">
                                    <svg class="w-5 h-5 lg:w-6 lg:h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <div class="stat-card rounded-xl lg:rounded-2xl p-4 lg:p-6 card-hover transition-all duration-300">
                            <div class="flex items-center justify-between">
                                <div class="flex-1 min-w-0">
                                    <p class="text-xs lg:text-sm font-medium text-gray-600">Keuntungan Bulan Ini</p>
                                    <p class="text-xl lg:text-3xl font-bold text-gray-900 truncate" id="monthly-profit">Rp 0</p>
                                    <p class="text-xs lg:text-sm text-green-600 mt-1">+8% dari target</p>
                                </div>
                                <div class="w-10 h-10 lg:w-12 lg:h-12 gradient-bg rounded-lg lg:rounded-xl flex items-center justify-center flex-shrink-0 ml-2">
                                    <svg class="w-5 h-5 lg:w-6 lg:h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M12 7a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0V8.414l-4.293 4.293a1 1 0 01-1.414 0L8 10.414l-4.293 4.293a1 1 0 01-1.414-1.414l5-5a1 1 0 011.414 0L11 10.586 14.586 7H12z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Transactions -->
                    <div class="card-gradient rounded-xl lg:rounded-2xl p-4 lg:p-6 shadow-lg">
                        <div class="flex items-center justify-between mb-4 lg:mb-6">
                            <h3 class="text-lg lg:text-xl font-bold text-gray-900">Transaksi Terbaru</h3>
                            <button onclick="showTab('transaksi-harian')" class="text-blue-600 hover:text-blue-800 font-medium text-sm lg:text-base">Lihat Semua</button>
                        </div>
                        <div class="overflow-x-auto -mx-4 lg:mx-0">
                            <table class="w-full min-w-full">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-2 lg:py-3 px-2 lg:px-4 font-semibold text-gray-700 text-xs lg:text-sm">ID</th>
                                        <th class="text-left py-2 lg:py-3 px-2 lg:px-4 font-semibold text-gray-700 text-xs lg:text-sm">Pelanggan</th>
                                        <th class="text-left py-2 lg:py-3 px-2 lg:px-4 font-semibold text-gray-700 text-xs lg:text-sm">Total</th>
                                        <th class="text-left py-2 lg:py-3 px-2 lg:px-4 font-semibold text-gray-700 text-xs lg:text-sm">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="recent-transactions">
                                    <tr class="table-row transition-all duration-300">
                                        <td class="py-2 lg:py-3 px-2 lg:px-4 text-gray-600 text-xs lg:text-sm">#001</td>
                                        <td class="py-2 lg:py-3 px-2 lg:px-4 text-gray-900 font-medium text-xs lg:text-sm">Budi Santoso</td>
                                        <td class="py-2 lg:py-3 px-2 lg:px-4 text-gray-900 font-semibold text-xs lg:text-sm">Rp 150.000</td>
                                        <td class="py-2 lg:py-3 px-2 lg:px-4">
                                            <span class="px-2 lg:px-3 py-1 bg-green-100 text-green-800 rounded-full text-xs lg:text-sm font-medium">Selesai</span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Transaksi Harian Tab -->
                <div id="content-transaksi-harian" class="hidden animate-fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900">Transaksi Harian</h3>
                            <p class="text-gray-600">Ringkasan transaksi per hari</p>
                        </div>
                        <div class="flex space-x-3">
                            <input type="date" id="daily-date" class="px-4 py-2 border border-gray-300 rounded-xl input-focus" value="">
                            <button onclick="filterDailyTransactions()" class="btn-primary text-white px-6 py-2 rounded-xl font-semibold">
                                Filter
                            </button>
                            <button onclick="openDailyTransactionModal()" class="btn-primary text-white px-8 py-3 rounded-xl font-semibold flex items-center space-x-3 shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300">
                                <div class="w-6 h-6 bg-white bg-opacity-20 rounded-lg flex items-center justify-center">
                                    <svg class="w-4 h-4 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                                <span>Buat Transaksi</span>
                            </button>
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Total Transaksi Hari Ini</h4>
                            <p class="text-3xl font-bold text-blue-600" id="daily-total-transactions">0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Pendapatan Hari Ini</h4>
                            <p class="text-3xl font-bold text-green-600" id="daily-revenue">Rp 0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Rata-rata per Transaksi</h4>
                            <p class="text-3xl font-bold text-purple-600" id="daily-average">Rp 0</p>
                        </div>
                    </div>

                    <div class="card-gradient rounded-2xl p-6 shadow-lg">
                        <h4 class="text-lg font-bold text-gray-900 mb-4">Detail Transaksi</h4>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700">Waktu</th>
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700">ID</th>
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700">Pelanggan</th>
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700">Layanan</th>
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700">Total</th>
                                        <th class="text-left py-3 px-4 font-semibold text-gray-700">Status</th>
                                    </tr>
                                </thead>
                                <tbody id="daily-transactions-table">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Tagihan Tab -->
                <div id="content-tagihan" class="hidden animate-fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900">Transaksi Tagihan</h3>
                            <p class="text-gray-600">Kelola tagihan dan pembayaran</p>
                        </div>
                        <button onclick="openInvoiceModal()" class="btn-primary text-white px-6 py-3 rounded-xl font-semibold">
                            + Buat Tagihan
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Tagihan Belum Dibayar</h4>
                            <p class="text-3xl font-bold text-red-600" id="unpaid-invoices">0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Total Piutang</h4>
                            <p class="text-3xl font-bold text-orange-600" id="total-receivables">Rp 0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Tagihan Lunas</h4>
                            <p class="text-3xl font-bold text-green-600" id="paid-invoices">0</p>
                        </div>
                    </div>

                    <div class="card-gradient rounded-2xl p-6 shadow-lg">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">No. Tagihan</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Tanggal</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Pelanggan</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Jumlah</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Jatuh Tempo</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Status</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="invoices-table">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Surat Jalan Tab -->
                <div id="content-surat-jalan" class="hidden animate-fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900">Surat Jalan</h3>
                            <p class="text-gray-600">Kelola pengiriman dan surat jalan</p>
                        </div>
                        <button onclick="openDeliveryModal()" class="btn-primary text-white px-6 py-3 rounded-xl font-semibold">
                            + Buat Surat Jalan
                        </button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Menunggu Kirim</h4>
                            <p class="text-3xl font-bold text-yellow-600" id="pending-deliveries">0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Dalam Perjalanan</h4>
                            <p class="text-3xl font-bold text-blue-600" id="in-transit-deliveries">0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Terkirim</h4>
                            <p class="text-3xl font-bold text-green-600" id="delivered-deliveries">0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Total Pengiriman</h4>
                            <p class="text-3xl font-bold text-purple-600" id="total-deliveries">0</p>
                        </div>
                    </div>

                    <div class="card-gradient rounded-2xl p-6 shadow-lg">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">No. Surat Jalan</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Tanggal</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Pelanggan</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Alamat Tujuan</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Status</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="deliveries-table">
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Laporan Tab -->
                <div id="content-laporan" class="hidden animate-fade-in">
                    <div class="mb-6">
                        <h3 class="text-2xl font-bold text-gray-900">Laporan Keuangan</h3>
                        <p class="text-gray-600">Analisis performa bisnis Anda</p>
                    </div>

                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                        <div class="card-gradient rounded-2xl p-6 shadow-lg">
                            <h4 class="text-lg font-bold text-gray-900 mb-4">Filter Laporan</h4>
                            <div class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Periode</label>
                                    <select id="report-period" class="w-full px-4 py-3 border border-gray-300 rounded-xl input-focus transition-all duration-300">
                                        <option value="today">Hari Ini</option>
                                        <option value="week">Minggu Ini</option>
                                        <option value="month">Bulan Ini</option>
                                        <option value="year">Tahun Ini</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Laporan</label>
                                    <select id="report-type" class="w-full px-4 py-3 border border-gray-300 rounded-xl input-focus transition-all duration-300">
                                        <option value="financial">Laporan Keuangan</option>
                                        <option value="sales">Laporan Penjualan</option>
                                        <option value="customer">Laporan Pelanggan</option>
                                        <option value="invoice">Laporan Tagihan</option>
                                        <option value="delivery">Laporan Pengiriman</option>
                                    </select>
                                </div>
                                <button onclick="generateReport()" class="w-full btn-primary text-white py-3 rounded-xl font-semibold">
                                    Generate Laporan
                                </button>
                            </div>
                        </div>

                        <div class="card-gradient rounded-2xl p-6 shadow-lg">
                            <h4 class="text-lg font-bold text-gray-900 mb-4">Ringkasan Keuangan</h4>
                            <div class="space-y-4">
                                <div class="flex justify-between items-center p-3 bg-green-50 rounded-xl">
                                    <span class="text-gray-700">Total Pemasukan</span>
                                    <span class="font-bold text-green-600" id="total-income">Rp 0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-red-50 rounded-xl">
                                    <span class="text-gray-700">Total Pengeluaran</span>
                                    <span class="font-bold text-red-600" id="total-expense">Rp 0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-blue-50 rounded-xl">
                                    <span class="text-gray-700">Keuntungan Bersih</span>
                                    <span class="font-bold text-blue-600" id="net-profit">Rp 0</span>
                                </div>
                                <div class="flex justify-between items-center p-3 bg-purple-50 rounded-xl">
                                    <span class="text-gray-700">Piutang Belum Lunas</span>
                                    <span class="font-bold text-purple-600" id="outstanding-receivables">Rp 0</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Detailed Reports -->
                    <div class="card-gradient rounded-2xl p-6 shadow-lg">
                        <h4 class="text-lg font-bold text-gray-900 mb-4">Detail Laporan</h4>
                        <div id="report-content">
                            <p class="text-gray-600 text-center py-8">Pilih periode dan jenis laporan, lalu klik "Generate Laporan" untuk melihat detail.</p>
                        </div>
                    </div>
                </div>

                <!-- Pelanggan Tab -->
                <div id="content-pelanggan" class="hidden animate-fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900">Data Pelanggan</h3>
                            <p class="text-gray-600">Kelola informasi pelanggan Anda</p>
                        </div>
                        <div class="flex space-x-3">
                            <button onclick="exportCustomers()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-xl font-semibold transition-all duration-300">
                                📊 Export
                            </button>
                            <button onclick="openCustomerModal()" class="btn-primary text-white px-6 py-3 rounded-xl font-semibold">
                                + Tambah Pelanggan
                            </button>
                        </div>
                    </div>

                    <!-- Customer Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Total Pelanggan</h4>
                            <p class="text-3xl font-bold text-blue-600" id="total-customers-count">0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Pelanggan Aktif</h4>
                            <p class="text-3xl font-bold text-green-600" id="active-customers-count">0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Pelanggan VIP</h4>
                            <p class="text-3xl font-bold text-purple-600" id="vip-customers-count">0</p>
                        </div>
                        <div class="stat-card rounded-2xl p-6">
                            <h4 class="text-lg font-semibold text-gray-700 mb-2">Rata-rata Belanja</h4>
                            <p class="text-3xl font-bold text-orange-600" id="avg-customer-spending">Rp 0</p>
                        </div>
                    </div>

                    <!-- Search and Filter Controls -->
                    <div class="card-gradient rounded-2xl p-6 shadow-lg mb-6">
                        <div class="flex flex-col md:flex-row gap-4 items-center">
                            <div class="flex-1">
                                <div class="relative">
                                    <input type="text" id="customer-search" class="w-full px-4 py-3 pl-10 border border-gray-300 rounded-xl input-focus" placeholder="🔍 Cari nama, email, atau telepon pelanggan..." oninput="filterCustomers()">
                                    <svg class="w-5 h-5 text-gray-400 absolute left-3 top-3.5" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                            </div>
                            <div class="flex space-x-3">
                                <select id="customer-filter" class="px-4 py-3 border border-gray-300 rounded-xl input-focus" onchange="filterCustomers()">
                                    <option value="all">Semua Pelanggan</option>
                                    <option value="active">Pelanggan Aktif (>2 transaksi)</option>
                                    <option value="vip">Pelanggan VIP (>5 transaksi)</option>
                                    <option value="new">Pelanggan Baru (≤2 transaksi)</option>
                                </select>
                                <select id="customer-sort" class="px-4 py-3 border border-gray-300 rounded-xl input-focus" onchange="filterCustomers()">
                                    <option value="name">Urutkan: Nama A-Z</option>
                                    <option value="name-desc">Urutkan: Nama Z-A</option>
                                    <option value="transactions">Urutkan: Transaksi Terbanyak</option>
                                    <option value="spending">Urutkan: Belanja Terbesar</option>
                                    <option value="recent">Urutkan: Terbaru</option>
                                </select>
                                <button onclick="clearCustomerFilters()" class="px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl transition-all duration-300">
                                    🔄 Reset
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="card-gradient rounded-2xl p-6 shadow-lg">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="text-lg font-bold text-gray-900">Daftar Pelanggan</h4>
                            <div class="text-sm text-gray-600">
                                Menampilkan <span id="customers-showing">0</span> dari <span id="customers-total">0</span> pelanggan
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead>
                                    <tr class="border-b border-gray-200">
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">ID</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Nama</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Kontak</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Telepon</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Transaksi</th>
                                        <th class="text-left py-4 px-4 font-semibold text-gray-700">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="customers-table">
                                    <!-- Customers will be populated here -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Harga Tab -->
                <div id="content-harga" class="hidden animate-fade-in">
                    <div class="flex justify-between items-center mb-6">
                        <div>
                            <h3 class="text-2xl font-bold text-gray-900">Daftar Harga Cetakan</h3>
                            <p class="text-gray-600">Kelola harga untuk setiap jenis cetakan</p>
                        </div>
                        <button onclick="openPriceModal()" class="btn-primary text-white px-6 py-3 rounded-xl font-semibold">
                            + Tambah Jenis Cetakan
                        </button>
                    </div>

                    <div id="price-cards-container">
                        <!-- Price table will be populated here -->
                    </div>
                </div>
            </main>
        </div>
    </div>
    </div>

    <!-- Customer Modal -->
    <div id="customer-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50">
        <div class="modal-content rounded-2xl p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-900">Tambah Pelanggan Baru</h3>
                <button onclick="closeCustomerModal()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <form id="customer-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Lengkap</label>
                    <input type="text" id="customer-fullname" class="w-full px-4 py-3 border border-gray-300 rounded-xl input-focus transition-all duration-300" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="customer-email" class="w-full px-4 py-3 border border-gray-300 rounded-xl input-focus transition-all duration-300" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nomor Telepon</label>
                    <input type="tel" id="customer-phone" class="w-full px-4 py-3 border border-gray-300 rounded-xl input-focus transition-all duration-300" required>
                </div>
                
                <div class="flex space-x-4 pt-4">
                    <button type="button" onclick="closeCustomerModal()" class="flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-300">
                        Batal
                    </button>
                    <button type="submit" class="flex-1 btn-primary text-white py-3 rounded-xl font-semibold">
                        Simpan
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Invoice Modal -->
    <div id="invoice-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50">
        <div class="modal-content rounded-2xl p-0 max-w-4xl w-full mx-4 max-h-[90vh] overflow-hidden shadow-xl">
            <!-- Simple Header -->
            <div class="bg-white px-6 py-4 border-b border-gray-200">
                <div class="flex justify-between items-center">
                    <h3 class="text-xl font-semibold text-gray-900">Buat Tagihan Baru</h3>
                    <button onclick="closeInvoiceModal()" class="text-gray-400 hover:text-gray-600 transition-colors">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Content -->
            <div class="max-h-[calc(90vh-140px)] overflow-y-auto">
                <form id="invoice-form" class="p-6 space-y-6">
                    <!-- Basic Info -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Nomor Tagihan</label>
                            <input type="text" id="invoice-number" class="w-full px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 font-mono text-sm" readonly>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal</label>
                            <input type="date" id="invoice-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Pelanggan</label>
                            <select id="invoice-customer" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus" required>
                                <option value="">Pilih Pelanggan</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Jatuh Tempo</label>
                            <input type="date" id="invoice-due-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus" required>
                        </div>
                    </div>

                    <!-- Items Section -->
                    <div class="border border-gray-200 rounded-lg p-4">
                        <div class="flex justify-between items-center mb-4">
                            <h4 class="font-medium text-gray-900">Item Tagihan</h4>
                            <button type="button" onclick="addInvoiceItem()" class="btn-primary text-white px-4 py-2 rounded-lg text-sm font-medium">
                                + Tambah Item
                            </button>
                        </div>
                        
                        <div id="invoice-items-container" class="space-y-3">
                            <!-- Invoice items will be added here -->
                        </div>
                        
                        <!-- Totals -->
                        <div class="mt-6 pt-4 border-t border-gray-200">
                            <div class="flex justify-end">
                                <div class="w-80 space-y-2">
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">Subtotal:</span>
                                        <span class="font-medium" id="invoice-subtotal">Rp 0</span>
                                    </div>
                                    <div class="flex justify-between text-sm">
                                        <span class="text-gray-600">PPN (11%):</span>
                                        <span class="font-medium" id="invoice-tax">Rp 0</span>
                                    </div>
                                    <div class="flex justify-between text-lg font-semibold pt-2 border-t border-gray-200">
                                        <span>Total:</span>
                                        <span class="text-blue-600" id="invoice-total">Rp 0</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Notes -->
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Catatan (Opsional)</label>
                        <textarea id="invoice-notes" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg input-focus resize-none" placeholder="Tambahkan catatan atau syarat pembayaran..."></textarea>
                    </div>
                </form>
            </div>

            <!-- Footer -->
            <div class="px-6 py-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-3">
                <button type="button" onclick="closeInvoiceModal()" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
                    Batal
                </button>
                <button type="submit" form="invoice-form" class="btn-primary text-white px-6 py-2 rounded-lg font-medium">
                    Buat Tagihan
                </button>
            </div>
        </div>
    </div>

    <!-- Price Modal -->
    <div id="price-modal" class="fixed inset-0 modal-backdrop hidden items-center justify-center z-50">
        <div class="modal-content rounded-2xl p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-900" id="price-modal-title">Tambah Jenis Cetakan</h3>
                <button onclick="closePriceModal()" class="text-gray-500 hover:text-gray-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
            </div>
            
            <form id="price-form" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Jenis Cetakan</label>
                    <input type="text" id="price-name" class="w-full px-4 py-3 border border-gray-300 rounded-xl input-focus transition-all duration-300" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Jenis Satuan</label>
                    <select id="price-unit" class="w-full px-4 py-3 border border-gray-300 rounded-xl input-focus transition-all duration-300" required>
                        <option value="">Pilih Satuan</option>
                        <option value="Per Meter">Per Meter</option>
                        <option value="Per Pcs">Per Pcs</option>
                        <option value="Per Lembar">Per Lembar</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Harga Harian (Rp)</label>
                    <input type="number" id="price-daily" class="w-full px-4 py-3 border border-gray-300 rounded-xl input-focus transition-all duration-300" min="0" required>
                </div>
                
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Harga Tagihan (Rp)</label>
                    <input type="number" id="price-billing" class="w-full px-4 py-3 border border-gray-300 rounded-xl input-focus transition-all duration-300" min="0" required>
                </div>
                
                <div class="flex space-x-4 pt-4">
                    <button type="button" onclick="closePriceModal()" class="flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-all duration-300">
                        Batal
                    </button>
                    <button type="submit" class="flex-1 btn-primary text-white py-3 rounded-xl font-semibold">
                        Simpan
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Data Storage
        let printPrices = {
            'Banner/Spanduk': { 
                dailyPrice: 75000, 
                billingPrice: 75000, 
                unit: 'Per Meter' 
            },
            'Stiker': { 
                dailyPrice: 25000, 
                billingPrice: 25000, 
                unit: 'Per Meter' 
            },
            'Albatros': { 
                dailyPrice: 45000, 
                billingPrice: 45000, 
                unit: 'Per Meter' 
            },
            'Oneway': { 
                dailyPrice: 35000, 
                billingPrice: 35000, 
                unit: 'Per Meter' 
            },
            'Brosur A4 (HVS)': { 
                dailyPrice: 1500, 
                billingPrice: 1500, 
                unit: 'Per Pcs' 
            },
            'Brosur A4 (Ap120gr)': { 
                dailyPrice: 2500, 
                billingPrice: 2500, 
                unit: 'Per Pcs' 
            },
            'Poster A3': { 
                dailyPrice: 15000, 
                billingPrice: 15000, 
                unit: 'Per Lembar' 
            },
            'Stempel': { 
                dailyPrice: 50000, 
                billingPrice: 50000, 
                unit: 'Per Pcs' 
            },
            'Id Card': { 
                dailyPrice: 8000, 
                billingPrice: 8000, 
                unit: 'Per Pcs' 
            },
            'Kartu Nama': { 
                dailyPrice: 3000, 
                billingPrice: 3000, 
                unit: 'Per Pcs' 
            }
        };

        let customers = [
            {
                id: 1,
                name: 'Budi Santoso',
                email: 'budi@email.com',
                phone: '081234567890',
                address: 'Jl. Merdeka No. 123, Jakarta Pusat',
                totalTransactions: 3
            },
            {
                id: 2,
                name: 'Siti Rahayu',
                email: 'siti@email.com',
                phone: '081234567891',
                address: 'Jl. Sudirman No. 456, Jakarta Selatan',
                totalTransactions: 2
            },
            {
                id: 3,
                name: 'Ahmad Wijaya',
                email: 'ahmad@email.com',
                phone: '081234567892',
                address: 'Jl. Thamrin No. 789, Jakarta Pusat',
                totalTransactions: 1
            }
        ];

        let transactions = [
            {
                id: 1,
                invoiceNumber: 'TXN-001',
                date: '2024-01-15',
                time: '10:30',
                customer: 'Budi Santoso',
                service: 'Banner/Spanduk',
                quantity: 2,
                total: 150000,
                status: 'Selesai',
                description: 'Cetak Banner 2x3m',
                type: 'daily'
            },
            {
                id: 2,
                invoiceNumber: 'TXN-002',
                date: '2024-01-16',
                time: '14:15',
                customer: 'Siti Rahayu',
                service: 'Stiker',
                quantity: 5,
                total: 125000,
                status: 'Selesai',
                description: 'Stiker promosi',
                type: 'daily'
            }
        ];

        let deliveries = [
            {
                id: 1,
                deliveryNumber: 'SJ-001',
                date: '2024-01-15',
                customer: 'Budi Santoso',
                address: 'Jl. Merdeka No. 123, Jakarta',
                items: 'Banner 2x3m (2 pcs)',
                status: 'Terkirim',
                notes: 'Pengiriman sesuai jadwal'
            }
        ];

        let invoices = [
            {
                id: 1,
                invoiceNumber: 'INV-001',
                date: '2024-01-15',
                dueDate: '2024-01-30',
                customer: 'Budi Santoso',
                items: [
                    {
                        description: 'Banner/Spanduk',
                        quantity: 2,
                        unit: 'Per Meter',
                        price: 75000,
                        total: 150000
                    }
                ],
                subtotal: 150000,
                tax: 16500,
                total: 166500,
                status: 'Belum Dibayar',
                notes: 'Banner promosi untuk acara'
            }
        ];

        let invoiceCounter = 2;

        // Tab Management
        function showTab(tabName) {
            // Hide all content
            const contents = ['dashboard', 'transaksi-harian', 'tagihan', 'surat-jalan', 'laporan', 'pelanggan', 'harga'];
            contents.forEach(content => {
                document.getElementById(`content-${content}`).classList.add('hidden');
                document.getElementById(`tab-${content}`).classList.remove('active-tab');
            });

            // Show selected content
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
            document.getElementById(`tab-${tabName}`).classList.add('active-tab');

            // Update header
            const titles = {
                dashboard: { title: 'Dashboard', subtitle: 'Ringkasan aktivitas bisnis Anda' },
                'transaksi-harian': { title: 'Transaksi Harian', subtitle: 'Ringkasan transaksi per hari' },
                tagihan: { title: 'Tagihan', subtitle: 'Kelola tagihan dan pembayaran' },
                'surat-jalan': { title: 'Surat Jalan', subtitle: 'Kelola pengiriman dan surat jalan' },
                laporan: { title: 'Laporan', subtitle: 'Analisis performa bisnis Anda' },
                pelanggan: { title: 'Pelanggan', subtitle: 'Kelola informasi pelanggan' },
                harga: { title: 'Daftar Harga', subtitle: 'Kelola harga untuk setiap jenis cetakan' }
            };

            document.getElementById('page-title').textContent = titles[tabName].title;
            document.getElementById('page-subtitle').textContent = titles[tabName].subtitle;

            // Refresh data when switching tabs
            if (tabName === 'pelanggan') {
                renderCustomers();
                updateCustomerStats();
                filterCustomers();
            } else if (tabName === 'dashboard') {
                updateDashboardStats();
            } else if (tabName === 'harga') {
                renderPriceCards();
            } else if (tabName === 'tagihan') {
                renderInvoices();
                updateInvoiceStats();
            }
        }

        // Customer Management
        function openCustomerModal(editId = null) {
            const modal = document.getElementById('customer-modal');
            const title = modal.querySelector('h3');
            const form = document.getElementById('customer-form');
            
            if (editId) {
                const customer = customers.find(c => c.id === editId);
                if (customer) {
                    title.textContent = 'Edit Pelanggan';
                    document.getElementById('customer-fullname').value = customer.name;
                    document.getElementById('customer-email').value = customer.email;
                    document.getElementById('customer-phone').value = customer.phone;
                    form.setAttribute('data-edit-id', editId);
                }
            } else {
                title.textContent = 'Tambah Pelanggan Baru';
                form.reset();
                form.removeAttribute('data-edit-id');
            }
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeCustomerModal() {
            document.getElementById('customer-modal').classList.add('hidden');
            document.getElementById('customer-modal').classList.remove('flex');
            document.getElementById('customer-form').reset();
            document.getElementById('customer-form').removeAttribute('data-edit-id');
        }

        function addCustomer(name, email, phone) {
            const form = document.getElementById('customer-form');
            const editId = form.getAttribute('data-edit-id');
            
            if (editId) {
                // Edit existing customer
                const customer = customers.find(c => c.id === parseInt(editId));
                if (customer) {
                    customer.name = name;
                    customer.email = email;
                    customer.phone = phone;
                    
                    alert(`✅ Data pelanggan berhasil diperbarui!\n\nNama: ${name}\nEmail: ${email}\nTelepon: ${phone}`);
                }
            } else {
                // Add new customer
                const newCustomer = {
                    id: customers.length + 1,
                    name: name,
                    email: email,
                    phone: phone,
                    address: `Alamat ${name}`,
                    totalTransactions: 0
                };

                customers.push(newCustomer);
                alert(`✅ Pelanggan baru berhasil ditambahkan!\n\nNama: ${name}\nEmail: ${email}\nTelepon: ${phone}`);
            }

            renderCustomers();
            updateDashboardStats();
            closeCustomerModal();
        }

        function renderCustomers() {
            const tbody = document.getElementById('customers-table');
            tbody.innerHTML = '';

            if (customers.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="6" class="py-12 px-4 text-center text-gray-500">
                        <div class="flex flex-col items-center">
                            <svg class="w-16 h-16 text-gray-300 mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
                            </svg>
                            <p class="text-lg font-medium text-gray-600 mb-2">Belum ada pelanggan</p>
                            <p class="text-sm text-gray-500">Klik "Tambah Pelanggan" untuk menambah pelanggan pertama</p>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
                return;
            }

            customers.forEach(customer => {
                const row = document.createElement('tr');
                row.className = 'table-row transition-all duration-300';
                
                // Calculate customer stats
                const customerTransactions = transactions.filter(t => t.customer === customer.name);
                const totalSpent = customerTransactions.reduce((sum, t) => sum + t.total, 0);
                const lastTransaction = customerTransactions.length > 0 ? 
                    customerTransactions[customerTransactions.length - 1].date : 'Belum ada';
                
                // Determine customer status
                let statusBadge = '';
                let statusClass = '';
                if (customer.totalTransactions > 5) {
                    statusBadge = 'VIP';
                    statusClass = 'bg-purple-100 text-purple-800';
                } else if (customer.totalTransactions > 2) {
                    statusBadge = 'Aktif';
                    statusClass = 'bg-green-100 text-green-800';
                } else {
                    statusBadge = 'Baru';
                    statusClass = 'bg-blue-100 text-blue-800';
                }
                
                row.innerHTML = `
                    <td class="py-3 px-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 gradient-bg rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold text-xs">${customer.name.charAt(0).toUpperCase()}</span>
                            </div>
                            <span class="text-gray-600 font-mono">#${String(customer.id).padStart(3, '0')}</span>
                        </div>
                    </td>
                    <td class="py-3 px-4">
                        <div>
                            <div class="text-gray-900 font-medium">${customer.name}</div>
                            <div class="flex items-center space-x-2 mt-1">
                                <span class="px-2 py-1 ${statusClass} rounded-full text-xs font-medium">${statusBadge}</span>
                            </div>
                        </div>
                    </td>
                    <td class="py-3 px-4">
                        <div class="text-gray-600">${customer.email}</div>
                        <div class="text-xs text-gray-500">📧 Email kontak</div>
                    </td>
                    <td class="py-3 px-4">
                        <div class="text-gray-600">${customer.phone}</div>
                        <div class="text-xs text-gray-500">Terakhir: ${lastTransaction}</div>
                    </td>
                    <td class="py-3 px-4">
                        <div class="text-center">
                            <div class="text-gray-900 font-semibold">${customer.totalTransactions}</div>
                            <div class="text-xs text-blue-600">Rp ${totalSpent.toLocaleString('id-ID')}</div>
                        </div>
                    </td>
                    <td class="py-3 px-4">
                        <div class="flex space-x-2">
                            <button onclick="viewCustomerDetails(${customer.id})" class="text-purple-600 hover:text-purple-800 font-medium text-sm px-2 py-1 rounded hover:bg-purple-50 transition-all duration-300" title="Lihat Detail">
                                👁️
                            </button>
                            <button onclick="editCustomer(${customer.id})" class="text-blue-600 hover:text-blue-800 font-medium text-sm px-2 py-1 rounded hover:bg-blue-50 transition-all duration-300" title="Edit">
                                ✏️
                            </button>
                            <button onclick="deleteCustomer(${customer.id})" class="text-red-600 hover:text-red-800 font-medium text-sm px-2 py-1 rounded hover:bg-red-50 transition-all duration-300" title="Hapus">
                                🗑️
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function editCustomer(id) {
            openCustomerModal(id);
        }

        function viewCustomerDetails(id) {
            const customer = customers.find(c => c.id === id);
            if (!customer) return;
            
            const customerTransactions = transactions.filter(t => t.customer === customer.name);
            const totalSpent = customerTransactions.reduce((sum, t) => sum + t.total, 0);
            const avgTransaction = customerTransactions.length > 0 ? totalSpent / customerTransactions.length : 0;
            
            alert(`📊 DETAIL PELANGGAN\n\n👤 ${customer.name}\n📧 ${customer.email}\n📱 ${customer.phone}\n\n💰 STATISTIK:\n• Total Transaksi: ${customer.totalTransactions}\n• Total Belanja: Rp ${totalSpent.toLocaleString('id-ID')}\n• Rata-rata: Rp ${Math.round(avgTransaction).toLocaleString('id-ID')}\n\n📈 STATUS: ${customer.totalTransactions > 5 ? 'Pelanggan VIP' : customer.totalTransactions > 2 ? 'Pelanggan Setia' : 'Pelanggan Baru'}`);
        }

        function deleteCustomer(id) {
            const customer = customers.find(c => c.id === id);
            if (!customer) return;
            
            const customerTransactions = transactions.filter(t => t.customer === customer.name);
            
            let confirmMessage = `Apakah Anda yakin ingin menghapus pelanggan "${customer.name}"?`;
            
            if (customerTransactions.length > 0) {
                confirmMessage += `\n\n⚠️ PERINGATAN: Pelanggan ini memiliki ${customerTransactions.length} transaksi.\nData transaksi akan tetap ada, tetapi referensi pelanggan akan hilang.`;
            }
            
            if (confirm(confirmMessage)) {
                customers = customers.filter(c => c.id !== id);
                renderCustomers();
                updateDashboardStats();
                updateCustomerStats();
                
                alert(`✅ Pelanggan "${customer.name}" berhasil dihapus dari sistem.`);
            }
        }

        // Customer Filter and Search Functions
        function filterCustomers() {
            const searchTerm = document.getElementById('customer-search').value.toLowerCase().trim();
            const filterType = document.getElementById('customer-filter').value;
            const sortType = document.getElementById('customer-sort').value;
            
            let filteredCustomers = [...customers];
            
            // Apply search filter
            if (searchTerm) {
                filteredCustomers = filteredCustomers.filter(customer => 
                    customer.name.toLowerCase().includes(searchTerm) ||
                    customer.email.toLowerCase().includes(searchTerm) ||
                    customer.phone.includes(searchTerm)
                );
            }
            
            // Apply category filter
            if (filterType !== 'all') {
                filteredCustomers = filteredCustomers.filter(customer => {
                    switch (filterType) {
                        case 'active':
                            return customer.totalTransactions > 2;
                        case 'vip':
                            return customer.totalTransactions > 5;
                        case 'new':
                            return customer.totalTransactions <= 2;
                        default:
                            return true;
                    }
                });
            }
            
            // Apply sorting
            filteredCustomers.sort((a, b) => {
                switch (sortType) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'name-desc':
                        return b.name.localeCompare(a.name);
                    case 'transactions':
                        return b.totalTransactions - a.totalTransactions;
                    case 'spending':
                        const aSpending = transactions.filter(t => t.customer === a.name).reduce((sum, t) => sum + t.total, 0);
                        const bSpending = transactions.filter(t => t.customer === b.name).reduce((sum, t) => sum + t.total, 0);
                        return bSpending - aSpending;
                    case 'recent':
                        return b.id - a.id;
                    default:
                        return 0;
                }
            });
            
            renderFilteredCustomers(filteredCustomers);
            updateCustomerCounts(filteredCustomers);
        }

        function renderFilteredCustomers(filteredCustomers) {
            const tbody = document.getElementById('customers-table');
            tbody.innerHTML = '';

            if (filteredCustomers.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="6" class="py-12 px-4 text-center text-gray-500">
                        <div class="flex flex-col items-center">
                            <svg class="w-16 h-16 text-gray-300 mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"></path>
                            </svg>
                            <p class="text-lg font-medium text-gray-600 mb-2">Tidak ada pelanggan ditemukan</p>
                            <p class="text-sm text-gray-500">Coba ubah kriteria pencarian atau filter</p>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
                return;
            }

            filteredCustomers.forEach(customer => {
                const row = document.createElement('tr');
                row.className = 'table-row transition-all duration-300';
                
                const customerTransactions = transactions.filter(t => t.customer === customer.name);
                const totalSpent = customerTransactions.reduce((sum, t) => sum + t.total, 0);
                const lastTransaction = customerTransactions.length > 0 ? 
                    customerTransactions[customerTransactions.length - 1].date : 'Belum ada';
                
                let statusBadge = '';
                let statusClass = '';
                if (customer.totalTransactions > 5) {
                    statusBadge = 'VIP';
                    statusClass = 'bg-purple-100 text-purple-800';
                } else if (customer.totalTransactions > 2) {
                    statusBadge = 'Aktif';
                    statusClass = 'bg-green-100 text-green-800';
                } else {
                    statusBadge = 'Baru';
                    statusClass = 'bg-blue-100 text-blue-800';
                }
                
                row.innerHTML = `
                    <td class="py-3 px-4">
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 gradient-bg rounded-full flex items-center justify-center">
                                <span class="text-white font-semibold text-xs">${customer.name.charAt(0).toUpperCase()}</span>
                            </div>
                            <span class="text-gray-600 font-mono">#${String(customer.id).padStart(3, '0')}</span>
                        </div>
                    </td>
                    <td class="py-3 px-4">
                        <div>
                            <div class="text-gray-900 font-medium">${customer.name}</div>
                            <div class="flex items-center space-x-2 mt-1">
                                <span class="px-2 py-1 ${statusClass} rounded-full text-xs font-medium">${statusBadge}</span>
                            </div>
                        </div>
                    </td>
                    <td class="py-3 px-4">
                        <div class="text-gray-600">${customer.email}</div>
                        <div class="text-xs text-gray-500">📧 Email kontak</div>
                    </td>
                    <td class="py-3 px-4">
                        <div class="text-gray-600">${customer.phone}</div>
                        <div class="text-xs text-gray-500">Terakhir: ${lastTransaction}</div>
                    </td>
                    <td class="py-3 px-4">
                        <div class="text-center">
                            <div class="text-gray-900 font-semibold">${customer.totalTransactions}</div>
                            <div class="text-xs text-blue-600">Rp ${totalSpent.toLocaleString('id-ID')}</div>
                        </div>
                    </td>
                    <td class="py-3 px-4">
                        <div class="flex space-x-2">
                            <button onclick="viewCustomerDetails(${customer.id})" class="text-purple-600 hover:text-purple-800 font-medium text-sm px-2 py-1 rounded hover:bg-purple-50 transition-all duration-300" title="Lihat Detail">
                                👁️
                            </button>
                            <button onclick="editCustomer(${customer.id})" class="text-blue-600 hover:text-blue-800 font-medium text-sm px-2 py-1 rounded hover:bg-blue-50 transition-all duration-300" title="Edit">
                                ✏️
                            </button>
                            <button onclick="deleteCustomer(${customer.id})" class="text-red-600 hover:text-red-800 font-medium text-sm px-2 py-1 rounded hover:bg-red-50 transition-all duration-300" title="Hapus">
                                🗑️
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateCustomerCounts(filteredCustomers) {
            document.getElementById('customers-showing').textContent = filteredCustomers.length;
            document.getElementById('customers-total').textContent = customers.length;
        }

        function clearCustomerFilters() {
            document.getElementById('customer-search').value = '';
            document.getElementById('customer-filter').value = 'all';
            document.getElementById('customer-sort').value = 'name';
            filterCustomers();
        }

        function updateCustomerStats() {
            const totalCustomers = customers.length;
            const activeCustomers = customers.filter(c => c.totalTransactions > 2).length;
            const vipCustomers = customers.filter(c => c.totalTransactions > 5).length;
            
            let totalSpending = 0;
            let customersWithTransactions = 0;
            
            customers.forEach(customer => {
                const customerTransactions = transactions.filter(t => t.customer === customer.name);
                const customerSpending = customerTransactions.reduce((sum, t) => sum + t.total, 0);
                if (customerSpending > 0) {
                    totalSpending += customerSpending;
                    customersWithTransactions++;
                }
            });
            
            const avgSpending = customersWithTransactions > 0 ? totalSpending / customersWithTransactions : 0;
            
            document.getElementById('total-customers-count').textContent = totalCustomers;
            document.getElementById('active-customers-count').textContent = activeCustomers;
            document.getElementById('vip-customers-count').textContent = vipCustomers;
            document.getElementById('avg-customer-spending').textContent = `Rp ${Math.round(avgSpending).toLocaleString('id-ID')}`;
        }

        function exportCustomers() {
            if (customers.length === 0) {
                alert('Tidak ada data pelanggan untuk diekspor');
                return;
            }
            
            const exportData = customers.map(customer => {
                const customerTransactions = transactions.filter(t => t.customer === customer.name);
                const totalSpent = customerTransactions.reduce((sum, t) => sum + t.total, 0);
                const lastTransaction = customerTransactions.length > 0 ? 
                    customerTransactions[customerTransactions.length - 1].date : 'Belum ada';
                
                let status = 'Baru';
                if (customer.totalTransactions > 5) status = 'VIP';
                else if (customer.totalTransactions > 2) status = 'Aktif';
                
                return {
                    'ID': `#${String(customer.id).padStart(3, '0')}`,
                    'Nama': customer.name,
                    'Email': customer.email,
                    'Telepon': customer.phone,
                    'Total Transaksi': customer.totalTransactions,
                    'Total Belanja': `Rp ${totalSpent.toLocaleString('id-ID')}`,
                    'Transaksi Terakhir': lastTransaction,
                    'Status': status
                };
            });
            
            const headers = Object.keys(exportData[0]);
            const csvContent = [
                headers.join(','),
                ...exportData.map(row => 
                    headers.map(header => `"${row[header]}"`).join(',')
                )
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `data-pelanggan-${new Date().toISOString().split('T')[0]}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert(`✅ Data ${customers.length} pelanggan berhasil diekspor!\n\nFile: data-pelanggan-${new Date().toISOString().split('T')[0]}.csv\nFormat: CSV (Excel Compatible)`);
        }

        // Price Management
        function renderPriceCards() {
            const container = document.getElementById('price-cards-container');
            container.innerHTML = '';

            const cardGrid = document.createElement('div');
            cardGrid.className = 'grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6';
            
            Object.entries(printPrices).forEach(([type, priceData]) => {
                const card = document.createElement('div');
                card.className = 'price-card-elegant group relative overflow-hidden';
                
                const icon = getPrintTypeIcon(type);
                
                card.innerHTML = `
                    <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-blue-500 to-purple-600"></div>
                    <div class="p-6">
                        <div class="flex items-start justify-between mb-4">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 gradient-bg rounded-xl flex items-center justify-center group-hover:scale-110 transition-transform duration-300">
                                    ${icon}
                                </div>
                                <div>
                                    <h3 class="text-lg font-bold text-gray-900 group-hover:text-blue-600 transition-colors duration-300">${type}</h3>
                                    <p class="text-sm text-gray-500 font-medium">${priceData.unit}</p>
                                </div>
                            </div>
                            <div class="flex space-x-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                                <button onclick="editPrice('${type}')" class="w-8 h-8 bg-blue-100 hover:bg-blue-200 text-blue-600 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"></path>
                                    </svg>
                                </button>
                                <button onclick="deletePrice('${type}')" class="w-8 h-8 bg-red-100 hover:bg-red-200 text-red-600 rounded-lg flex items-center justify-center transition-all duration-300 hover:scale-110">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                                    </svg>
                                </button>
                            </div>
                        </div>
                        
                        <div class="space-y-4">
                            <div class="price-section">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-gray-600">Harga Harian</span>
                                    <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
                                </div>
                                <div class="text-2xl font-bold text-blue-600 mb-1">
                                    Rp ${priceData.dailyPrice.toLocaleString('id-ID')}
                                </div>
                                <div class="text-xs text-gray-500">Per transaksi harian</div>
                            </div>
                            
                            <div class="border-t border-gray-100 pt-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-gray-600">Harga Tagihan</span>
                                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                                </div>
                                <div class="text-2xl font-bold text-green-600 mb-1">
                                    Rp ${priceData.billingPrice.toLocaleString('id-ID')}
                                </div>
                                <div class="text-xs text-gray-500">Per tagihan resmi</div>
                            </div>
                        </div>
                        
                        <div class="mt-6 pt-4 border-t border-gray-100">
                            <div class="flex items-center justify-between text-xs text-gray-500">
                                <span>Satuan: ${priceData.unit}</span>
                                <span class="flex items-center space-x-1">
                                    <div class="w-1 h-1 bg-gray-400 rounded-full"></div>
                                    <div class="w-1 h-1 bg-gray-400 rounded-full"></div>
                                    <div class="w-1 h-1 bg-gray-400 rounded-full"></div>
                                </span>
                            </div>
                        </div>
                    </div>
                `;
                
                cardGrid.appendChild(card);
            });
            
            container.appendChild(cardGrid);
        }

        function getPrintTypeIcon(type) {
            const icons = {
                'Banner/Spanduk': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"></path></svg>',
                'Stiker': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>',
                'Albatros': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zm0 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V8zm0 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z" clip-rule="evenodd"></path></svg>',
                'Oneway': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.293l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z" clip-rule="evenodd"></path></svg>',
                'Brosur A4 (HVS)': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"></path></svg>',
                'Brosur A4 (Ap120gr)': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z" clip-rule="evenodd"></path></svg>',
                'Poster A3': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z"></path></svg>',
                'Stempel': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd"></path></svg>',
                'Id Card': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 2a4 4 0 00-4 4v1H5a1 1 0 00-.994.89l-1 9A1 1 0 004 18h12a1 1 0 00.994-1.11l-1-9A1 1 0 0015 7h-1V6a4 4 0 00-4-4zm2 5V6a2 2 0 10-4 0v1h4zm-6 3a1 1 0 112 0 1 1 0 01-2 0zm7-1a1 1 0 100 2 1 1 0 000-2z" clip-rule="evenodd"></path></svg>',
                'Kartu Nama': '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path d="M4 4a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2H4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z"></path></svg>'
            };
            
            return icons[type] || '<svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M4 2a2 2 0 00-2 2v12a2 2 0 002 2h12a2 2 0 002-2V4a2 2 0 00-2-2H4zm3 2h6v4H7V4zm8 8v2h-2v-2h2zM9 8h2v2H9V8zm2 4h2v2h-2v-2zM7 12h2v2H7v-2z" clip-rule="evenodd"></path></svg>';
        }

        function openPriceModal(editType = null) {
            const modal = document.getElementById('price-modal');
            const title = document.getElementById('price-modal-title');
            const nameInput = document.getElementById('price-name');
            const unitSelect = document.getElementById('price-unit');
            const dailyInput = document.getElementById('price-daily');
            const billingInput = document.getElementById('price-billing');

            if (editType) {
                title.textContent = 'Edit Harga Cetakan';
                nameInput.value = editType;
                nameInput.readOnly = true;
                unitSelect.value = printPrices[editType].unit;
                dailyInput.value = printPrices[editType].dailyPrice;
                billingInput.value = printPrices[editType].billingPrice;
            } else {
                title.textContent = 'Tambah Jenis Cetakan';
                nameInput.readOnly = false;
                document.getElementById('price-form').reset();
            }
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closePriceModal() {
            document.getElementById('price-modal').classList.add('hidden');
            document.getElementById('price-modal').classList.remove('flex');
            document.getElementById('price-form').reset();
            document.getElementById('price-name').readOnly = false;
        }

        function editPrice(type) {
            openPriceModal(type);
        }

        function deletePrice(type) {
            if (confirm(`Apakah Anda yakin ingin menghapus jenis cetakan "${type}"?`)) {
                delete printPrices[type];
                renderPriceCards();
            }
        }

        function addOrUpdatePrice(name, unit, dailyPrice, billingPrice) {
            const isNewPrice = !printPrices[name];
            
            printPrices[name] = {
                unit: unit,
                dailyPrice: parseInt(dailyPrice),
                billingPrice: parseInt(billingPrice)
            };
            
            renderPriceCards();
            closePriceModal();
            
            const action = isNewPrice ? 'ditambahkan' : 'diperbarui';
            alert(`✅ Jenis cetakan "${name}" berhasil ${action}!\n\nHarga Harian: Rp ${parseInt(dailyPrice).toLocaleString('id-ID')}\nHarga Tagihan: Rp ${parseInt(billingPrice).toLocaleString('id-ID')}\nSatuan: ${unit}`);
        }

        // Dashboard Stats
        function updateDashboardStats() {
            const totalSales = transactions.reduce((sum, t) => sum + t.total, 0);
            const todayDate = new Date().toISOString().split('T')[0];
            const todayTransactions = transactions.filter(t => t.date === todayDate).length;
            const totalCustomers = customers.length;
            const monthlyProfit = totalSales * 0.3;

            document.getElementById('total-sales').textContent = `Rp ${totalSales.toLocaleString('id-ID')}`;
            document.getElementById('today-transactions').textContent = todayTransactions;
            document.getElementById('total-customers').textContent = totalCustomers;
            document.getElementById('monthly-profit').textContent = `Rp ${monthlyProfit.toLocaleString('id-ID')}`;

            const recentTransactionsTable = document.getElementById('recent-transactions');
            recentTransactionsTable.innerHTML = '';
            
            const recentTransactions = transactions.slice(-5).reverse();
            recentTransactions.forEach(transaction => {
                const row = document.createElement('tr');
                row.className = 'table-row transition-all duration-300';
                
                const statusClass = transaction.status === 'Selesai' ? 'bg-green-100 text-green-800' : 
                                   transaction.status === 'Proses' ? 'bg-yellow-100 text-yellow-800' : 
                                   'bg-red-100 text-red-800';

                row.innerHTML = `
                    <td class="py-3 px-4 text-gray-600">${transaction.invoiceNumber}</td>
                    <td class="py-3 px-4 text-gray-900 font-medium">${transaction.customer}</td>
                    <td class="py-3 px-4 text-gray-900 font-semibold">Rp ${transaction.total.toLocaleString('id-ID')}</td>
                    <td class="py-3 px-4">
                        <span class="px-3 py-1 ${statusClass} rounded-full text-sm font-medium">${transaction.status}</span>
                    </td>
                `;
                recentTransactionsTable.appendChild(row);
            });
        }

        // Form Handlers
        document.getElementById('customer-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('customer-fullname').value;
            const email = document.getElementById('customer-email').value;
            const phone = document.getElementById('customer-phone').value;

            addCustomer(name, email, phone);
        });

        document.getElementById('price-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const name = document.getElementById('price-name').value.trim();
            const unit = document.getElementById('price-unit').value;
            const dailyPrice = document.getElementById('price-daily').value;
            const billingPrice = document.getElementById('price-billing').value;

            if (!name) {
                alert('Silakan masukkan nama jenis cetakan');
                return;
            }
            
            if (!unit) {
                alert('Silakan pilih jenis satuan');
                return;
            }
            
            if (!dailyPrice || dailyPrice <= 0) {
                alert('Silakan masukkan harga harian yang valid');
                return;
            }
            
            if (!billingPrice || billingPrice <= 0) {
                alert('Silakan masukkan harga tagihan yang valid');
                return;
            }

            const nameInput = document.getElementById('price-name');
            if (!nameInput.readOnly && printPrices[name]) {
                alert('Jenis cetakan dengan nama ini sudah ada. Silakan gunakan nama yang berbeda.');
                return;
            }

            addOrUpdatePrice(name, unit, dailyPrice, billingPrice);
        });

        // Form Handlers
        document.getElementById('invoice-form').addEventListener('submit', function(e) {
            e.preventDefault();
            createInvoice();
        });

        // Login Management
        function togglePassword() {
            const passwordInput = document.getElementById('login-password');
            const eyeIcon = document.getElementById('eye-icon');
            
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                eyeIcon.innerHTML = `
                    <path d="M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z"></path>
                    <path d="M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z"></path>
                `;
            } else {
                passwordInput.type = 'password';
                eyeIcon.innerHTML = `
                    <path d="M10 12a2 2 0 100-4 2 2 0 000 4z"></path>
                    <path fill-rule="evenodd" d="M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z" clip-rule="evenodd"></path>
                `;
            }
        }

        function getUserRole(username) {
            const userRoles = {
                'admin': 'admin',
                'user': 'user',
                'demo': 'user'
            };
            return userRoles[username] || 'user';
        }

        function setupUserInterface(userRole) {
            const adminOnlyTabs = ['laporan', 'pelanggan', 'harga'];
            
            if (userRole === 'user') {
                // Hide admin-only tabs for regular users
                adminOnlyTabs.forEach(tabName => {
                    const tabButton = document.getElementById(`tab-${tabName}`);
                    if (tabButton) {
                        tabButton.style.display = 'none';
                    }
                });
                
                // Update welcome message for user role
                const welcomeText = document.querySelector('header .text-right p:first-child');
                if (welcomeText) {
                    welcomeText.textContent = 'Selamat datang, User';
                }
            } else {
                // Show all tabs for admin
                adminOnlyTabs.forEach(tabName => {
                    const tabButton = document.getElementById(`tab-${tabName}`);
                    if (tabButton) {
                        tabButton.style.display = 'flex';
                    }
                });
            }
        }

        function login(username, password) {
            // Demo credentials with roles
            const validCredentials = {
                'admin': { password: 'admin123', role: 'admin' },
                'user': { password: 'user123', role: 'user' },
                'demo': { password: 'demo123', role: 'user' }
            };

            if (validCredentials[username] && validCredentials[username].password === password) {
                const userRole = validCredentials[username].role;
                
                // Store login state
                localStorage.setItem('isLoggedIn', 'true');
                localStorage.setItem('currentUser', username);
                localStorage.setItem('userRole', userRole);
                
                // Hide login page and show main app
                document.getElementById('login-page').classList.add('hidden');
                document.getElementById('main-app').classList.remove('hidden');
                
                // Setup interface based on user role
                setupUserInterface(userRole);
                
                // Update welcome message
                const welcomeText = document.getElementById('user-display-name');
                if (welcomeText) {
                    const roleText = userRole === 'admin' ? 'Admin' : 'User';
                    welcomeText.textContent = `${roleText} - FP Digital`;
                }
                
                // Initialize app based on role
                updateDashboardStats();
                if (userRole === 'admin') {
                    renderCustomers();
                    updateCustomerStats();
                    renderPriceCards();
                }
                renderInvoices();
                updateInvoiceStats();
                
                return true;
            }
            
            return false;
        }

        function logout() {
            const currentUser = localStorage.getItem('currentUser') || 'User';
            const userRole = localStorage.getItem('userRole') || 'user';
            const roleText = userRole === 'admin' ? 'Administrator' : 'User';
            
            if (confirm(`🚪 KONFIRMASI LOGOUT\n\n👤 User: ${currentUser}\n🎭 Role: ${roleText}\n\n❓ Apakah Anda yakin ingin keluar dari sistem?\n\nAnda akan kembali ke halaman login dan semua session akan dihapus.`)) {
                // Clear all login data completely
                localStorage.clear();
                sessionStorage.clear();
                
                // Show login page and hide main app
                document.getElementById('main-app').classList.add('hidden');
                document.getElementById('login-page').classList.remove('hidden');
                
                // Reset all tabs to visible (for next login)
                const allTabs = ['dashboard', 'transaksi-harian', 'tagihan', 'surat-jalan', 'laporan', 'pelanggan', 'harga'];
                allTabs.forEach(tabName => {
                    const tabButton = document.getElementById(`tab-${tabName}`);
                    if (tabButton) {
                        tabButton.style.display = 'flex';
                        tabButton.classList.remove('active-tab');
                    }
                });
                
                // Reset to dashboard tab as active
                document.getElementById('tab-dashboard').classList.add('active-tab');
                
                // Reset all content visibility
                const contents = ['dashboard', 'transaksi-harian', 'tagihan', 'surat-jalan', 'laporan', 'pelanggan', 'harga'];
                contents.forEach(content => {
                    const contentEl = document.getElementById(`content-${content}`);
                    if (contentEl) {
                        contentEl.classList.add('hidden');
                    }
                });
                document.getElementById('content-dashboard').classList.remove('hidden');
                
                // Reset header titles
                document.getElementById('page-title').textContent = 'Dashboard';
                document.getElementById('page-subtitle').textContent = 'Ringkasan aktivitas bisnis Anda';
                
                // Reset login form completely
                const loginForm = document.getElementById('login-form');
                if (loginForm) {
                    loginForm.reset();
                }
                
                // Reset user display name
                document.getElementById('user-display-name').textContent = 'Admin FP Digital';
                
                // Close any open modals
                const modals = ['customer-modal', 'invoice-modal', 'price-modal'];
                modals.forEach(modalId => {
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        modal.classList.add('hidden');
                        modal.classList.remove('flex');
                    }
                });
                
                // Show success message
                alert(`✅ LOGOUT BERHASIL!\n\n👤 ${currentUser} (${roleText}) telah keluar dari sistem dengan aman.\n\n🔒 Semua data session telah dibersihkan.\n🔑 Silakan login kembali untuk mengakses sistem.\n\n📱 Terima kasih telah menggunakan FP Digital Printing!`);
            }
        }

        function checkLoginState() {
            const isLoggedIn = localStorage.getItem('isLoggedIn');
            const currentUser = localStorage.getItem('currentUser');
            const userRole = localStorage.getItem('userRole');
            
            if (isLoggedIn === 'true' && currentUser && userRole) {
                // User is logged in, show main app
                document.getElementById('login-page').classList.add('hidden');
                document.getElementById('main-app').classList.remove('hidden');
                
                // Setup interface based on stored user role
                setupUserInterface(userRole);
                
                // Update welcome message
                const welcomeText = document.getElementById('user-display-name');
                if (welcomeText) {
                    const roleText = userRole === 'admin' ? 'Admin' : 'User';
                    welcomeText.textContent = `${roleText} - FP Digital`;
                }
                
                return true;
            } else {
                // User is not logged in, show login page
                document.getElementById('login-page').classList.remove('hidden');
                document.getElementById('main-app').classList.add('hidden');
                return false;
            }
        }

        // Login form handler
        document.getElementById('login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value;
            
            if (!username || !password) {
                alert('❌ Silakan masukkan username dan password');
                return;
            }
            
            if (login(username, password)) {
                const userRole = localStorage.getItem('userRole');
                const roleText = userRole === 'admin' ? 'Administrator' : 'User';
                const accessText = userRole === 'admin' ? 'Akses penuh ke semua fitur sistem' : 'Akses ke Dashboard, Transaksi Harian, Tagihan, dan Surat Jalan';
                
                alert(`✅ Selamat datang, ${username}!\n\nRole: ${roleText}\n${accessText}\n\nAnda berhasil masuk ke sistem FP Digital Printing.`);
            } else {
                alert('❌ Username atau password salah!\n\nSilakan periksa kembali kredensial Anda.\n\n💡 Gunakan demo login:\n👑 Admin: admin / admin123\n👤 User: user / user123');
                
                // Clear password field
                document.getElementById('login-password').value = '';
                document.getElementById('login-password').focus();
            }
        });

        // Mobile Menu Functions
        function toggleMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobile-overlay');
            const menuBtn = document.getElementById('mobile-menu-btn');
            
            if (sidebar.classList.contains('-translate-x-full')) {
                // Show sidebar
                sidebar.classList.remove('-translate-x-full');
                overlay.classList.remove('hidden');
                menuBtn.innerHTML = `
                    <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                `;
            } else {
                // Hide sidebar
                sidebar.classList.add('-translate-x-full');
                overlay.classList.add('hidden');
                menuBtn.innerHTML = `
                    <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                `;
            }
        }

        function closeMobileMenu() {
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('mobile-overlay');
            const menuBtn = document.getElementById('mobile-menu-btn');
            
            sidebar.classList.add('-translate-x-full');
            overlay.classList.add('hidden');
            menuBtn.innerHTML = `
                <svg class="w-6 h-6 text-gray-700" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            `;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu event listeners
            document.getElementById('mobile-menu-btn').addEventListener('click', toggleMobileMenu);
            document.getElementById('mobile-overlay').addEventListener('click', closeMobileMenu);
            
            // Close mobile menu when clicking sidebar items
            document.querySelectorAll('.sidebar-item').forEach(item => {
                item.addEventListener('click', () => {
                    setTimeout(closeMobileMenu, 100);
                });
            });
            
            // Check login state first
            if (checkLoginState()) {
                // User is logged in, initialize app based on role
                const userRole = localStorage.getItem('userRole');
                updateDashboardStats();
                if (userRole === 'admin') {
                    renderCustomers();
                    updateCustomerStats();
                    renderPriceCards();
                }
                renderInvoices();
                updateInvoiceStats();
            }
        });

        // Invoice Management
        function openInvoiceModal() {
            const modal = document.getElementById('invoice-modal');
            
            // Generate invoice number
            const invoiceNumber = `INV-${String(invoiceCounter).padStart(3, '0')}`;
            document.getElementById('invoice-number').value = invoiceNumber;
            
            // Set default dates
            const today = new Date().toISOString().split('T')[0];
            const dueDate = new Date();
            dueDate.setDate(dueDate.getDate() + 30);
            
            document.getElementById('invoice-date').value = today;
            document.getElementById('invoice-due-date').value = dueDate.toISOString().split('T')[0];
            
            // Populate customer dropdown
            populateCustomerDropdown();
            
            // Clear items and add first item
            document.getElementById('invoice-items-container').innerHTML = '';
            addInvoiceItem();
            
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function closeInvoiceModal() {
            document.getElementById('invoice-modal').classList.add('hidden');
            document.getElementById('invoice-modal').classList.remove('flex');
            document.getElementById('invoice-form').reset();
        }

        function populateCustomerDropdown() {
            const select = document.getElementById('invoice-customer');
            select.innerHTML = '<option value="">Pilih Pelanggan</option>';
            
            customers.forEach(customer => {
                const option = document.createElement('option');
                option.value = customer.name;
                option.textContent = `${customer.name} - ${customer.email}`;
                select.appendChild(option);
            });
        }

        function addInvoiceItem() {
            const container = document.getElementById('invoice-items-container');
            const itemIndex = container.children.length;
            
            const itemDiv = document.createElement('div');
            itemDiv.className = 'invoice-item bg-gray-50 border border-gray-200 rounded-lg p-4';
            itemDiv.innerHTML = `
                <div class="flex justify-between items-center mb-3">
                    <span class="text-sm font-medium text-gray-700">Item ${itemIndex + 1}</span>
                    ${itemIndex > 0 ? `
                        <button type="button" onclick="removeInvoiceItem(this)" class="text-red-500 hover:text-red-700 text-sm">
                            Hapus
                        </button>
                    ` : ''}
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 mb-3">
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">Jenis Cetakan</label>
                        <select class="item-description w-full px-3 py-2 border border-gray-300 rounded-lg text-sm input-focus" onchange="updateItemPrice(this)" required>
                            <option value="">Pilih Jenis Cetakan</option>
                            ${Object.keys(printPrices).map(type => 
                                `<option value="${type}" data-price="${printPrices[type].billingPrice}" data-unit="${printPrices[type].unit}">${type}</option>`
                            ).join('')}
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">Deskripsi</label>
                        <input type="text" class="item-detail w-full px-3 py-2 border border-gray-300 rounded-lg text-sm input-focus" placeholder="Contoh: Ukuran 2x3m">
                    </div>
                </div>
                
                <div class="grid grid-cols-3 gap-3">
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">Jumlah</label>
                        <input type="number" class="item-quantity w-full px-3 py-2 border border-gray-300 rounded-lg text-sm input-focus" min="1" value="1" onchange="calculateItemTotal(this)" required>
                    </div>
                    
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">Harga Satuan</label>
                        <input type="number" class="item-price w-full px-3 py-2 border border-gray-300 rounded-lg text-sm input-focus" min="0" onchange="calculateItemTotal(this)" required>
                    </div>
                    
                    <div>
                        <label class="block text-xs font-medium text-gray-600 mb-1">Total</label>
                        <input type="number" class="item-total w-full px-3 py-2 border border-gray-300 rounded-lg text-sm bg-gray-100" readonly>
                    </div>
                </div>
            `;
            
            container.appendChild(itemDiv);
        }

        function removeInvoiceItem(button) {
            button.closest('.invoice-item').remove();
            calculateInvoiceTotal();
            
            // Update item numbers
            const items = document.querySelectorAll('.invoice-item h5');
            items.forEach((item, index) => {
                item.textContent = `Item ${index + 1}`;
            });
        }

        function updateItemPrice(select) {
            const selectedOption = select.options[select.selectedIndex];
            const priceInput = select.closest('.invoice-item').querySelector('.item-price');
            
            if (selectedOption.value) {
                priceInput.value = selectedOption.dataset.price;
                calculateItemTotal(priceInput);
            } else {
                priceInput.value = '';
            }
        }

        function calculateItemTotal(input) {
            const itemDiv = input.closest('.invoice-item');
            const quantity = parseFloat(itemDiv.querySelector('.item-quantity').value) || 0;
            const price = parseFloat(itemDiv.querySelector('.item-price').value) || 0;
            const totalInput = itemDiv.querySelector('.item-total');
            
            const total = quantity * price;
            totalInput.value = total;
            
            calculateInvoiceTotal();
        }

        function calculateInvoiceTotal() {
            const itemTotals = document.querySelectorAll('.item-total');
            let subtotal = 0;
            
            itemTotals.forEach(input => {
                subtotal += parseFloat(input.value) || 0;
            });
            
            const tax = subtotal * 0.11; // PPN 11%
            const total = subtotal + tax;
            
            document.getElementById('invoice-subtotal').textContent = `Rp ${subtotal.toLocaleString('id-ID')}`;
            document.getElementById('invoice-tax').textContent = `Rp ${Math.round(tax).toLocaleString('id-ID')}`;
            document.getElementById('invoice-total').textContent = `Rp ${Math.round(total).toLocaleString('id-ID')}`;
        }

        function createInvoice() {
            const invoiceNumber = document.getElementById('invoice-number').value;
            const date = document.getElementById('invoice-date').value;
            const dueDate = document.getElementById('invoice-due-date').value;
            const customer = document.getElementById('invoice-customer').value;
            const notes = document.getElementById('invoice-notes').value;
            
            if (!customer) {
                alert('Silakan pilih pelanggan');
                return;
            }
            
            // Collect items
            const items = [];
            const itemDivs = document.querySelectorAll('.invoice-item');
            
            for (let itemDiv of itemDivs) {
                const description = itemDiv.querySelector('.item-description').value;
                const quantity = parseFloat(itemDiv.querySelector('.item-quantity').value);
                const price = parseFloat(itemDiv.querySelector('.item-price').value);
                const total = parseFloat(itemDiv.querySelector('.item-total').value);
                const detail = itemDiv.querySelector('.item-detail').value;
                
                if (!description || !quantity || !price) {
                    alert('Silakan lengkapi semua item tagihan');
                    return;
                }
                
                const selectedOption = itemDiv.querySelector('.item-description').options[itemDiv.querySelector('.item-description').selectedIndex];
                const unit = selectedOption.dataset.unit;
                
                items.push({
                    description: description,
                    detail: detail,
                    quantity: quantity,
                    unit: unit,
                    price: price,
                    total: total
                });
            }
            
            if (items.length === 0) {
                alert('Silakan tambahkan minimal satu item');
                return;
            }
            
            // Calculate totals
            const subtotal = items.reduce((sum, item) => sum + item.total, 0);
            const tax = subtotal * 0.11;
            const total = subtotal + tax;
            
            // Create invoice object
            const newInvoice = {
                id: invoiceCounter,
                invoiceNumber: invoiceNumber,
                date: date,
                dueDate: dueDate,
                customer: customer,
                items: items,
                subtotal: subtotal,
                tax: Math.round(tax),
                total: Math.round(total),
                status: 'Belum Dibayar',
                notes: notes
            };
            
            invoices.push(newInvoice);
            invoiceCounter++;
            
            // Update customer transaction count
            const customerObj = customers.find(c => c.name === customer);
            if (customerObj) {
                customerObj.totalTransactions++;
            }
            
            renderInvoices();
            updateInvoiceStats();
            updateDashboardStats();
            closeInvoiceModal();
            
            alert(`✅ Tagihan berhasil dibuat!\n\nNo. Tagihan: ${invoiceNumber}\nPelanggan: ${customer}\nTotal: Rp ${Math.round(total).toLocaleString('id-ID')}\nJatuh Tempo: ${dueDate}`);
        }

        function openDeliveryModal() {
            alert('Fitur surat jalan akan segera hadir!');
        }

        function openDailyTransactionModal() {
            alert('Fitur transaksi harian akan segera hadir!');
        }

        function filterDailyTransactions() {
            alert('Fitur filter transaksi harian akan segera hadir!');
        }

        function renderInvoices() {
            const tbody = document.getElementById('invoices-table');
            tbody.innerHTML = '';

            if (invoices.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td colspan="7" class="py-12 px-4 text-center text-gray-500">
                        <div class="flex flex-col items-center">
                            <svg class="w-16 h-16 text-gray-300 mb-4" fill="currentColor" viewBox="0 0 20 20">
                                <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"></path>
                            </svg>
                            <p class="text-lg font-medium text-gray-600 mb-2">Belum ada tagihan</p>
                            <p class="text-sm text-gray-500">Klik "Buat Tagihan" untuk membuat tagihan pertama</p>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
                return;
            }

            invoices.forEach(invoice => {
                const row = document.createElement('tr');
                row.className = 'table-row transition-all duration-300';
                
                const statusClass = invoice.status === 'Lunas' ? 'bg-green-100 text-green-800' : 
                                   invoice.status === 'Sebagian' ? 'bg-yellow-100 text-yellow-800' : 
                                   'bg-red-100 text-red-800';

                const isOverdue = new Date(invoice.dueDate) < new Date() && invoice.status !== 'Lunas';
                
                row.innerHTML = `
                    <td class="py-4 px-4">
                        <div class="font-mono text-blue-600 font-semibold">${invoice.invoiceNumber}</div>
                        ${isOverdue ? '<div class="text-xs text-red-600 font-medium">⚠️ Terlambat</div>' : ''}
                    </td>
                    <td class="py-4 px-4 text-gray-600">${invoice.date}</td>
                    <td class="py-4 px-4">
                        <div class="text-gray-900 font-medium">${invoice.customer}</div>
                        <div class="text-xs text-gray-500">${invoice.items.length} item</div>
                    </td>
                    <td class="py-4 px-4">
                        <div class="text-gray-900 font-semibold">Rp ${invoice.total.toLocaleString('id-ID')}</div>
                        <div class="text-xs text-gray-500">+PPN 11%</div>
                    </td>
                    <td class="py-4 px-4">
                        <div class="text-gray-600">${invoice.dueDate}</div>
                        ${isOverdue ? '<div class="text-xs text-red-600">Lewat tempo</div>' : ''}
                    </td>
                    <td class="py-4 px-4">
                        <span class="px-3 py-1 ${statusClass} rounded-full text-sm font-medium">${invoice.status}</span>
                    </td>
                    <td class="py-4 px-4">
                        <div class="flex space-x-2">
                            <button onclick="viewInvoice(${invoice.id})" class="text-purple-600 hover:text-purple-800 font-medium text-sm px-2 py-1 rounded hover:bg-purple-50 transition-all duration-300" title="Lihat">
                                👁️
                            </button>
                            <button onclick="markInvoicePaid(${invoice.id})" class="text-green-600 hover:text-green-800 font-medium text-sm px-2 py-1 rounded hover:bg-green-50 transition-all duration-300" title="Tandai Lunas">
                                💰
                            </button>
                            <button onclick="deleteInvoice(${invoice.id})" class="text-red-600 hover:text-red-800 font-medium text-sm px-2 py-1 rounded hover:bg-red-50 transition-all duration-300" title="Hapus">
                                🗑️
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        function updateInvoiceStats() {
            const unpaidInvoices = invoices.filter(inv => inv.status === 'Belum Dibayar').length;
            const totalReceivables = invoices.filter(inv => inv.status === 'Belum Dibayar').reduce((sum, inv) => sum + inv.total, 0);
            const paidInvoices = invoices.filter(inv => inv.status === 'Lunas').length;
            
            document.getElementById('unpaid-invoices').textContent = unpaidInvoices;
            document.getElementById('total-receivables').textContent = `Rp ${totalReceivables.toLocaleString('id-ID')}`;
            document.getElementById('paid-invoices').textContent = paidInvoices;
        }

        function viewInvoice(id) {
            const invoice = invoices.find(inv => inv.id === id);
            if (!invoice) return;
            
            let itemsText = invoice.items.map(item => 
                `• ${item.description} (${item.quantity} ${item.unit}) - Rp ${item.total.toLocaleString('id-ID')}`
            ).join('\n');
            
            alert(`📄 DETAIL TAGIHAN\n\n🔢 ${invoice.invoiceNumber}\n📅 ${invoice.date}\n👤 ${invoice.customer}\n⏰ Jatuh Tempo: ${invoice.dueDate}\n\n📋 ITEM:\n${itemsText}\n\n💰 TOTAL:\n• Subtotal: Rp ${invoice.subtotal.toLocaleString('id-ID')}\n• PPN (11%): Rp ${invoice.tax.toLocaleString('id-ID')}\n• TOTAL: Rp ${invoice.total.toLocaleString('id-ID')}\n\n📊 Status: ${invoice.status}${invoice.notes ? `\n\n📝 Catatan: ${invoice.notes}` : ''}`);
        }

        function markInvoicePaid(id) {
            const invoice = invoices.find(inv => inv.id === id);
            if (!invoice) return;
            
            if (invoice.status === 'Lunas') {
                alert('Tagihan ini sudah lunas');
                return;
            }
            
            if (confirm(`Tandai tagihan ${invoice.invoiceNumber} sebagai LUNAS?\n\nTotal: Rp ${invoice.total.toLocaleString('id-ID')}`)) {
                invoice.status = 'Lunas';
                renderInvoices();
                updateInvoiceStats();
                updateDashboardStats();
                
                alert(`✅ Tagihan ${invoice.invoiceNumber} berhasil ditandai sebagai LUNAS!`);
            }
        }

        function deleteInvoice(id) {
            const invoice = invoices.find(inv => inv.id === id);
            if (!invoice) return;
            
            if (confirm(`Apakah Anda yakin ingin menghapus tagihan ${invoice.invoiceNumber}?\n\nPelanggan: ${invoice.customer}\nTotal: Rp ${invoice.total.toLocaleString('id-ID')}\n\n⚠️ Tindakan ini tidak dapat dibatalkan!`)) {
                invoices.splice(invoices.findIndex(inv => inv.id === id), 1);
                renderInvoices();
                updateInvoiceStats();
                updateDashboardStats();
                
                alert(`✅ Tagihan ${invoice.invoiceNumber} berhasil dihapus!`);
            }
        }

        function generateReport() {
            alert('Fitur laporan akan segera hadir!');
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97733e9060b2cec2',t:'MTc1NjU0NTk2My4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
